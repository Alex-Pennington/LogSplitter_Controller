{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "üîß Build Monitor",
			"type": "shell",
			"command": "C:\\Users\\USER\\.platformio\\penv\\Scripts\\platformio.exe",
			"args": ["run"],
			"group": "build",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared",
				"showReuseMessage": true,
				"clear": false
			},
			"problemMatcher": ["$gcc"]
		},
		{
			"label": "ÔøΩ Upload Monitor via USB",
			"type": "shell",
			"command": "C:\\Users\\USER\\.platformio\\penv\\Scripts\\platformio.exe",
			"args": ["run", "--target", "upload"],
			"group": "build",
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared",
				"showReuseMessage": true,
				"clear": false
			},
			"problemMatcher": ["$gcc"],
			"dependsOn": "üîß Build Monitor"
		},
		{
			"label": "ÔøΩ Build and Upload via TFTP",
			"type": "shell",
			"command": "powershell.exe",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy", "Bypass",
				"-File",
				"${workspaceFolder}\\scripts\\build_and_upload_tftp.ps1",
				"-TargetHost", "192.168.1.225"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"options": {
				"cwd": "${workspaceFolder}"
			},
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": true,
				"panel": "shared",
				"showReuseMessage": true,
				"clear": true
			},
			"problemMatcher": ["$gcc"]
		},
		{
			"label": "üåê Upload via TFTP Only",
			"type": "shell",
			"command": "powershell.exe",
			"args": [
				"-NoProfile",
				"-ExecutionPolicy", "Bypass",
				"-Command",
				"& { $targetHost = '192.168.1.225'; $firmwarePath = 'monitor\\.pio\\build\\uno_r4_wifi\\firmware.bin'; if (-not (Test-Path $firmwarePath)) { Write-Host 'Error: No firmware found. Build first!' -ForegroundColor Red; exit 1 }; Write-Host 'Starting TFTP upload...' -ForegroundColor Green; & tftp -i $targetHost put $firmwarePath firmware.bin; if ($LASTEXITCODE -eq 0) { Write-Host 'Upload successful!' -ForegroundColor Green } else { Write-Host 'Upload failed!' -ForegroundColor Red } }"
			],
			"group": "build",
			"options": {
				"cwd": "${workspaceFolder}"
			},
			"presentation": {
				"echo": true,
				"reveal": "always",
				"focus": false,
				"panel": "shared",
				"showReuseMessage": true,
				"clear": false
			}
		}
	]
}